# Relay

## Usage
In the `go-iden3/cmd/relay` directory, run:
```
go run main.go
```

Also can be build using:
```
go build
```

And then execute:
```
./relay
```

Will need to have a config file `config.yaml` with the following data:
```yaml
server:
  port: 5000
  privK: "serverprivatekey"
geth:
  url: "https://ropsten.infura.io/apitoken"
contractsAddress:
  identities: "identitiescontractaddress"
domain: "iden3.io"
namespace: "iden3.io"
```

## API Endpoints


### GET /root

Returns:
```js
{
  contractRoot: '0xfd89568c4dfe0b22be91c810421dcf02ac7ca42bc005461886a443fb6e0ead78',
  root: '0x0000000000000000000000000000000000000000000000000000000000000000'
}
```

### POST /claim/:idaddr
Input:
```js
{
  valueHex: '0x3cfc3a1edbf691316fec9b75970fbfb2b0e8d8edfc6ec7628db77c4969403074353f867ef725411de05e3d4b0a01c37cf7ad24bcc213141a05ed7726d7932a1f00000000bc8c480e68d0895f1e410f4e4ea6e2d6b160ca9f2077bb3f0400dd62421c97220536fd6ed2be29228e8db1315e8c6d7525f4bdf4dad9966a2e7371f0a24b1929ed765c0e7a3f2b4665a76a19d58173308bb34062000000005b816b9e000000005b816b9e',
  signatureHex: '0xa2462f8c244395314e4635ba8d408eaa2fe0e2acc10e47ae45a3b46a7f70a35624f4c635e0f1e34c2ecf9e6f9ff09b565ffee204ab72773bf530e62c140ac5421b'
}
```

Returns:
```js
{
  claimProof: '0x0000000000000000000000000000000000000000000000000000000000000000',
  idRootProof: '0x0000000000000000000000000000000000000000000000000000000000000000',
  root: '0xfd89568c4dfe0b22be91c810421dcf02ac7ca42bc005461886a443fb6e0ead78'
}
```

### GET /claim/:idaddr/root

Returns:
```js
{
  idRoot: '0x0000000000000000000000000000000000000000000000000000000000000000',
  idRootProof: '0x0000000000000000000000000000000000000000000000000000000000000000',
  root: '0x0000000000000000000000000000000000000000000000000000000000000000'
}
```

### GET /claim/:idaddr/hi/:hi

Returns:
```js
{
  claim: '0x3cfc3a1edbf691316fec9b75970fbfb2b0e8d8edfc6ec7628db77c4969403074353f867ef725411de05e3d4b0a01c37cf7ad24bcc213141a05ed7726d7932a1f00000000bc8c480e68d0895f1e410f4e4ea6e2d6b160ca9f2077bb3f0400dd62421c97220536fd6ed2be29228e8db1315e8c6d7525f4bdf4dad9966a2e7371f0a24b1929ed765c0e7a3f2b4665a76a19d58173308bb34062000000005b816b9e000000005b816b9e',
  idProof: '0x0000000000000000000000000000000000000000000000000000000000000000',
  idRoot: '0xd1d3ebd84f46ec73767a2fe89930f33eef96ddf18c35e03faf03a98c8e6bf207',
  relayProof: '0x0000000000000000000000000000000000000000000000000000000000000000',
  relayRoot: '0xfd89568c4dfe0b22be91c810421dcf02ac7ca42bc005461886a443fb6e0ead78',
  setRootClaim: '0x3cfc3a1edbf691316fec9b75970fbfb2b0e8d8edfc6ec7628db77c49694030749b9a76a0132a0814192c05c9321efc30c7286f6187f18fc6b6858214fe963e0e00000001bc8c480e68d0895f1e410f4e4ea6e2d6b160ca9fd1d3ebd84f46ec73767a2fe89930f33eef96ddf18c35e03faf03a98c8e6bf207'
}
```
